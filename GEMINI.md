# CLAUDE.md - Claude Code設定

## 家族・個人情報

### 基本情報

- **住所**: 神戸市六甲アイランド
- **家族構成**: 4人家族

### 家族詳細

- **涼平（父）**: 1985年10月25日生まれ
- **可奈（母）**: 1985年11月22日生まれ
- **あかり（長女）**: 2016年11月1日生まれ（小学生）
- **陽太（長男）**: 2019年1月28日生まれ（小学生）

### 井口家（涼平の実家）

- **住所**: 神戸市西区学園東町
- **井口雅司**: 井口涼平の父
- **井口みゆき**: 井口涼平の母
- **井口ちひろ**: 井口涼平の妹
- **井口祥太郎**: 井口涼平の弟（早月ちゃんと結婚、宝塚在住）
  - **小夏ちゃん**: 2017年生まれ（あかり・陽太の従姉妹）
  - **大地くん**: （あかり・陽太の従兄弟）

### 白波瀬家（可奈の実家）

- **住所**: 神戸市西区学園西町
- **白波瀬泰史**: 井口可奈の父
- **白波瀬礼子**: 井口可奈の母
- **白波瀬由佳**: 井口可奈の妹（奄美大島在住）

## Obsidian保管庫について

この保管庫は個人用の知識管理庫です。主に以下のような内容を管理しています：

- Webクリッピング（技術記事、ガジェット情報など）
- 技術メモ（Minecraft、Synology NAS設定など）
- 製品情報・仕様（バックパック、ビデオレコーダーなど）
- 個人メモ（家計簿、駐車場情報など）
- 旅行プラン（奄美大島、神鍋高原など）

## ファイル構成

- `/Clippings/` - Webクリッピングした記事
- `/_resources/` - 画像や添付ファイル
- その他のMarkdownファイル - 個人メモ

## 📋 統合タグ体系（2025年7月改訂版）

このObsidian保管庫では以下の階層的タグ体系を使用します：

### 🏗️ 主要カテゴリ（6分類）

#### 技術系
- `#技術/AI` - AI、Claude関連技術
- `#技術/Docker` - Docker、コンテナ管理、Portainer
- `#技術/Git` - Git、GitHub、バージョン管理
- `#技術/Obsidian` - Obsidian、ObsidianSync関連
- `#技術/モバイル` - iOS、iPhone、iPad、モバイル開発
- `#技術/マインクラフト` - マインクラフト、ゲーム関連技術
- `#技術/サーバー` - Synology、n8n、サーバー管理
- `#技術/開発環境` - Windows、WSL、CLI、開発ツール
- `#技術/自動化` - 自動化、設定、同期ツール

#### 生活系
- `#生活/家計` - 家計管理、支出、予算、定期支払い
- `#生活/住宅` - 住宅、メンテナンス、修繕
- `#生活/健康` - 医療、薬品、健康管理
- `#生活/製品` - 製品情報、ファミリー用品、レジャー

#### 旅行系
- `#旅行/計画` - 旅行計画、スケジュール
- `#旅行/ガイド` - 観光ガイド、子連れ旅行情報
- `#旅行/国内` - 国内旅行先（奄美、神鍋高原など）

### 📄 コンテンツ種別タグ

- `#クリッピング` - Webクリッピング記事
- `#メモ` - 個人メモ・記録
- `#ガイド` - 手順書・設定ガイド
- `#レビュー` - 製品・サービスレビュー

### 🔖 特殊分類

- `#個人` - 個人的な記録・手続き

## 編集・作業時の注意点

1. 既存のファイル構造を尊重する
2. 画像パスは相対パスで管理されている
3. Obsidianの形式に合わせてマークダウンを編集する
4. 個人情報を含むファイルは慎重に扱う
5. 新しいファイルには適切なタグを追加する

## 📋 Obsidianファイル形式ルール

### YAML Frontmatterの使用

**全てのMarkdownファイルは以下のYAML frontmatter形式でメタデータを記述する：**

```yaml
---
tags: [タグ1, タグ2, タグ3]
created: YYYY-MM-DD
updated: YYYY-MM-DD
---
```

### 必須項目

1. **tags**: `[配列形式]`でタグを記述
   - 例: `tags: [技術, Docker, n8n, Synology]`
   - 文末にハッシュタグ（#技術 #Docker）は**使用しない**

2. **created**: ファイル作成日を `YYYY-MM-DD` 形式で記述
   - 例: `created: 2025-07-03`

3. **updated**: 最終更新日を `YYYY-MM-DD` 形式で記述
   - 例: `updated: 2025-07-03`

### 任意項目

- **version**: バージョン管理が必要な場合
- **travel_date**: 旅行関連ファイルの場合
- **その他**: ファイルの性質に応じて追加可能

### タグ記述の禁止事項

- ❌ **文末でのハッシュタグ**: `#技術 #Docker #n8n`
- ❌ **文中でのハッシュタグ**: `**タグ**: #技術 #Docker`
- ✅ **YAML frontmatterのみ**: `tags: [技術, Docker, n8n]`

### 例

```yaml
---
tags: [技術, Docker, n8n, Synology, Portainer, コンテナ管理, 自動化, クリッピング]
created: 2025-07-03
updated: 2025-07-03
---

# ファイルタイトル
```

**⚠️ 重要**: 既存ファイルを編集する際は、必ずこの形式に準拠すること。

## 📝 文書作成時の品質管理

### 必須ファクトチェック手順

**新しい文書やガイドを作成する際は、以下の手順を必ず実行すること：**

1. **文書作成完了後**
   - WebSearchツールを使用して事実確認を実施
   - 価格情報、技術仕様、機能詳細などの正確性を検証
   - 競合製品・サービスとの比較情報を確認

2. **検証対象項目**
   - 価格・料金体系（為替レート考慮）
   - 開発者・企業情報
   - 機能・制限事項
   - 対応OS・システム要件
   - 更新状況・サポート状況

3. **情報修正**
   - 検証結果に基づいて不正確な情報を即座に修正
   - 情報源と検証日時を記録
   - 疑問点がある場合は追加調査を実施

**⚠️ 重要**: この手順を省略してはならない。特に技術文書、製品ガイド、比較記事において正確性は最優先事項とする。

## Git管理

- 自動コミットが設定されている
- `.obsidian/`フォルダは除外されている
- `.DS_Store`も除外されている

## 🔍 タグ別記事検索（統合後）

### 技術系
- `#技術/AI` - AI・Claude関連記事
- `#技術/Docker` - Docker・コンテナ関連記事
- `#技術/Git` - Git・GitHub関連記事
- `#技術/Obsidian` - Obsidian関連記事
- `#技術/モバイル` - iOS・モバイル開発記事
- `#技術/マインクラフト` - マインクラフト関連記事
- `#技術/サーバー` - サーバー管理記事
- `#技術/開発環境` - 開発環境・ツール記事
- `#技術/自動化` - 自動化・設定記事

### 生活系
- `#生活/家計` - 家計・財務管理記事
- `#生活/住宅` - 住宅・メンテナンス記事
- `#生活/健康` - 健康・医療記事
- `#生活/製品` - 製品・用品記事

### 旅行系
- `#旅行/計画` - 旅行計画記事
- `#旅行/ガイド` - 観光ガイド記事
- `#旅行/国内` - 国内旅行記事

### コンテンツ種別
- `#クリッピング` - Web記事保存
- `#メモ` - 個人メモ
- `#ガイド` - 手順書・ガイド
- `#レビュー` - 製品・サービスレビュー
- `#個人` - 個人記録

## 💰 資産管理レポート作成システム

### 概要
マネーフォワードCSVデータを活用した年次資産管理レポート作成システムを構築。

### 📁 ファイル構成
- **資産管理フォルダ**: `/資産管理/`
  - `2024年資産管理レポート.md` - 年次資産分析レポート
  - `analyze_finances.py` - 自動分析スクリプト
  - `マネーフォワード情報/` - CSVデータフォルダ
    - `収入・支出詳細_YYYY-MM-DD_YYYY-MM-DD.csv` - 月別収支データ
    - `資産推移_YYYY-MM.csv` - 月別資産推移データ
  - `給与/` - 給与関連書類フォルダ
    - `YYYY/` - 年別フォルダ
      - `YYYY-MM_給与.pdf` - 月別給与明細
      - `YYYY-MM_特別一時金.pdf` - ボーナス明細
      - `YYYY_源泉徴収.pdf` - 年末調整・源泉徴収票

### 🔧 分析スクリプト機能

#### **analyze_finances.py** - メイン分析スクリプト
1. **データ読み込み**
   - Shift_JIS形式のCSVファイルを自動読み込み
   - 月別収支・資産データの統合処理

2. **分析機能**
   - 年間収支サマリー（収入・支出・純収入・貯蓄率）
   - 月別収支推移
   - 支出カテゴリ別分析（上位10項目）
   - 資産推移分析（現金・投資の内訳）
   - 投資ポートフォリオ分析

3. **💵 USD換算分析**
   - 2024年月別USD/JPY為替レート対応
   - 円安影響の定量分析
   - 実質資産増加率の算出
   - 為替変動による影響額の計算

#### **📄 PDF処理スクリプト**
**pdf_salary_reader.py** - 基本PDF読み取り：
- PyPDF2とpdfplumberを使用
- テキスト・テーブル抽出機能
- 日本語PDF対応（文字化け対応）

**pdf_salary_parser.py** - 高度給与解析：
- 文字化けテキストからの数値抽出
- 給与項目の自動推定機能
- 月給・ボーナス・手取り額の分析
- 年収・控除率の計算

##### PDF処理の技術的特徴
- **ライブラリ**: PyPDF2 3.0.1, pdfplumber 0.11.7
- **日本語対応**: Shift_JIS/UTF-8エンコーディング処理
- **数値抽出**: 正規表現による金額パターン認識
- **給与推定**: ファイル名・金額範囲による項目分類
- **エラー処理**: 文字化け・読み取りエラーの適切な処理

### 📊 レポート内容
**2024年資産管理レポート.md** の構成：

1. **年間収支サマリー**
   - 円建て・USD建て両方での分析
   - 貯蓄率と財務健全性評価

2. **月別収支詳細**
   - ボーナス月の影響分析
   - 通常月の収支パターン把握

3. **💼 給与・収入構造分析**
   - 給与明細・ボーナス・源泉徴収票の概要
   - ボーナス依存度分析（年収の40.7%）
   - 月収の安定性評価
   - 税金・社会保険料の詳細

4. **支出カテゴリ別分析**
   - 食費、住宅、自動車等の主要支出項目
   - 固定費・変動費の分類

5. **資産推移分析**
   - 現金・預金と投資資産の推移
   - 投資比率の変化

6. **💡 円安影響分析**
   - USD換算での実質資産増減
   - 為替変動による購買力への影響
   - 海外投資の円安ヘッジ効果

7. **将来への提言**
   - 家計収支改善策
   - 投資戦略最適化（円安対応）
   - 通貨分散の重要性

### 🔄 更新手順
1. マネーフォワードからCSVデータをエクスポート
2. `マネーフォワード情報/` フォルダに配置
3. 給与明細・源泉徴収票をPDF形式で `給与/YYYY/` フォルダに保管
4. `python3 analyze_finances.py` で分析実行
5. レポートファイルを手動更新

### 📈 分析の特徴
- **為替レート考慮**: 2024年の円安進行（5.4%）を反映
- **実質分析**: 為替変動を除いた真の資産増加を算出
- **国際比較**: USD建てでの資産成長率評価
- **投資効果**: 円安ヘッジとしての海外投資の有効性分析

### 今後の改善項目
- 月次レポート自動生成機能
- 為替レートAPI連携
- 投資商品別パフォーマンス分析
- 予算vs実績比較機能
